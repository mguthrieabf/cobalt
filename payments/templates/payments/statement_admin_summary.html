{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}

<div class="">
  <div class="card">
    <div class="card-header card-header-primary">
      <h1>{{ GLOBAL_ORG }} {{ GLOBAL_CURRENCY_NAME}}s</h1>
      <h2>System Administration</h2>
      <h2>Net Liability: {{ GLOBAL_CURRENCY_SYMBOL}}{{ balance|floatformat:2|intcomma }}</h2>
    </div>
    <div class="card-body table-responsive">
      <div class="card">
        <div class="card-header card-header-success">
          <h2>Members</h2>
        </div>
        <div class="card-body">
          <table>
            <tr>
              <td>Total Members:</td>
              <td class="text-right px-2">{{ total_members|floatformat:0|intcomma }}</td>
            </tr>
            <tr>
              <td>Members with Balances:</td>
              <td class="text-right px-2">{{ members_with_balances|floatformat:0|intcomma }}</td>
            </tr>
            <tr>
              <td>Auto Top Up Enabled:</td>
              <td class="text-right px-2">{{ auto_top_up|intcomma }}</td>
            </tr>
            <tr>
              <td>Total Balance:</td>
              <td class="text-right px-2">{{ GLOBAL_CURRENCY_SYMBOL }}{{ total_balance_members|floatformat:2|intcomma }}</td>
            </tr>
          </table>
          {% include "generic_user_search_body.html" %}
          <a class="cobalt_generic_member btn btn-warning btn-sm" data-toggle="modal" id="id_member_search" data-target="#cobalt_general_member_search"><span style="color: white;">Lookup Member Statement</span></a>
        </div>
      </div>
      <br>
          <div class="card">
            <div class="card-header card-header-success">
              <h2>Organisations</h2>
            </div>
            <div class="card-body">
          <h2>Organisations</h2>
          <table>
            <tr>
              <td>Total Organisations:</td>
              <td class="text-right px-2">{{ total_orgs|floatformat:0|intcomma }}</td>
            </tr>
            <tr>
              <td>Organisations with Balances:</td>
              <td class="text-right px-2">{{ orgs_with_balances|floatformat:0|intcomma }}</td>
            </tr>
            <tr>
              <td>Total Balance:</td>
              <td class="text-right px-2">{{ GLOBAL_CURRENCY_SYMBOL }}{{ total_balance_orgs|floatformat:2|intcomma }}</td>
            </tr>
          </table>
          {% include "generic_org_search_body.html" %}
          <a class="cobalt_generic_org btn btn-warning btn-sm" data-toggle="modal" id="id_org_search" data-target="#cobalt_general_org_search"><span style="color: white;">Lookup Org Statement</span></a>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block footer %}
<script>
{% include 'generic_user_search_footer.html' %}
{% include 'generic_org_search_footer.html' %}
function cobaltMemberSearchOk() {
// clear the form
  clearModal();

// Go to member statement
  window.location.href = 'statement-admin-view/' + member_id ;
}
function cobaltOrgSearchOk() {
// clear the form
  clearModalOrg();

// Go to org statement
  window.location.href = 'statement-org/' + org_id ;
}
</script>


{% endblock %}
