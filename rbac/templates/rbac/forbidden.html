{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="jumbotron">
  <div class="d-flex justify-content-between">
    <div class="card col-lg-9">
      <div class="card-header card-header-danger">
        <h2>Role Based Access Controls</h2>
        <h3>You do not have permission</h3>
      </div>
      <div class="card-body">
          <img src="{% static "assets/img/stop.jpg" %}" width="200px">
        Sorry! You do not the right permissions to view this page.
        <br>
        <div class="container">
          <div class="row">
            <div class="col text-center">
              <button class="btn btn-info" id="details">Details</button>
            </div>
          </div>
        </div>
        <div id="detailsinfo" style="display: none;">
          <div class="card">
            <div class="card-header card-header-success">
              <h3>Explanation</h3>
            </div>
            <div class="card-body">
              You are {{ request.user}}.
              <br>
              You tried to access {{ request.META.PATH_INFO }}
              <br>
              This requires the role: {{ role }} which you do not have.
              <br>
              The following groups have this access:
              <ul>
                {% for group in groups %}
                <li><a href="{% url "rbac:group_view" group_id=group.group.id %}">{{ group.group.name_qualifier }}.{{ group.group.name_item }}</a>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


</div>
{% endblock %}

{% block footer %}
<script>
  $(document).ready(
    function(){
        $("#details").click(function () {
            $("#detailsinfo").toggle();
            if ($("#details").text() == "Details") {
              $("#details").text("Hide Details");
            } else {
              $("#details").text("Details");
            }
        });
    });
</script>
{% endblock %}
