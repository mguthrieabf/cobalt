{% extends 'base.html' %}
{% load log %}



{% block content %}

{% get_admin_log 10 as admin_log %}
<h3>Recent Admin Activity</h3>
{% for adm in admin_log %}
{{ adm.user }} {{ adm }}<br>
{% endfor %}

<div class="col-md-12">
  <div class="card">
    <div class="card-header card-header-warning">
      <h4 class="card-title">Logs</h4>
    </div>
    <div class="card-body table-responsive">
      <table class="table table-hover">
        <thead class="text-info">
          <tr>
            <th>Time Stamp</th>
            <th>IP</th>
            <th>Severity</th>
            <th>User</th>
            <th>Source</th>
            <th>Sub Source</th>
            <th>Message</th>
          </tr>
        </thead>
        <tbody>
          {% for thing in things %}
            <tr>
              <td title="{{ thing.event_date }}">{{ thing.event_date|timesince }} ago</td>
              <td>{{ thing.ip }}</td>
              <td class="

              {% if thing.severity == "DEBUG" %}bg-white{% endif %}
              {% if thing.severity == "INFO" %}bg-light{% endif %}
              {% if thing.severity == "WARN" %}bg-info{% endif %}
              {% if thing.severity == "ERROR" %}bg-warning{% endif %}
              {% if thing.severity == "HIGH" %}bg-danger text-blue{% endif %}
              {% if thing.severity == "CRITICAL" %}bg-dark text-white font-weight-bold{% endif %}

              ">{{ thing.severity }}</td>
              <td>{{ thing.user }}</td>
              <td>{{ thing.source }}</td>
              <td>{{ thing.sub_source }}</td>
              <td>{{ thing.message }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      {% include 'pagination_footer.html' %}

    </div>
  </div>
</div>

{% endblock %}
